<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="1e3 1029 937 512" width="937" height="512">
  <defs>
    <font-face font-family="Menlo" font-size="16" panose-1="2 11 6 9 3 8 4 2 2 4" units-per-em="1000" underline-position="-63.47656" underline-thickness="43.94531" slope="0" x-height="546.875" cap-height="729.0039" ascent="928.2227" descent="-235.83984" font-weight="400">
      <font-face-src>
        <font-face-name name="Menlo-Regular"/>
      </font-face-src>
    </font-face>
    <font-face font-family="Menlo" font-size="16" panose-1="2 11 7 9 3 6 4 2 2 4" units-per-em="1000" underline-position="-63.47656" underline-thickness="43.94531" slope="0" x-height="546.875" cap-height="729.9805" ascent="928.2227" descent="-235.83984" font-weight="700">
      <font-face-src>
        <font-face-name name="Menlo-Bold"/>
      </font-face-src>
    </font-face>
    <font-face font-family="Menlo" font-size="12" panose-1="2 11 6 9 3 8 4 2 2 4" units-per-em="1000" underline-position="-63.47656" underline-thickness="43.94531" slope="0" x-height="546.875" cap-height="729.0039" ascent="928.2227" descent="-235.83984" font-weight="400">
      <font-face-src>
        <font-face-name name="Menlo-Regular"/>
      </font-face-src>
    </font-face>
    <font-face font-family="Helvetica Neue" font-size="9" panose-1="2 0 5 3 0 0 0 9 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="-1333.3333" x-height="517" cap-height="714" ascent="957.0007" descent="-212.99744" font-style="italic" font-weight="400">
      <font-face-src>
        <font-face-name name="HelveticaNeue-Italic"/>
      </font-face-src>
    </font-face>
    <font-face font-family="Helvetica Neue" font-size="16" panose-1="2 0 5 3 0 0 0 9 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="-750" x-height="517" cap-height="714" ascent="957.0007" descent="-212.99744" font-style="italic" font-weight="400">
      <font-face-src>
        <font-face-name name="HelveticaNeue-Italic"/>
      </font-face-src>
    </font-face>
    <marker orient="auto" overflow="visible" markerUnits="strokeWidth" id="FilledArrow_Marker" stroke-linejoin="miter" stroke-miterlimit="10" viewBox="-1 -4 10 8" markerWidth="10" markerHeight="8" color="gray">
      <g>
        <path d="M 8 0 L 0 -3 L 0 3 Z" fill="currentColor" stroke="currentColor" stroke-width="1"/>
      </g>
    </marker>
  </defs>
  <metadata> Produced by OmniGraffle 7.8 
    <dc:date>2019-10-29 18:37:04 +0000</dc:date>
  </metadata>
  <g id="DerivedAssociations" fill-opacity="1" stroke-dasharray="none" stroke="none" stroke-opacity="1" fill="none">
    <title>DerivedAssociations</title>
    <g id="DerivedAssociations: Layer 1">
      <title>Layer 1</title>
      <g id="Group_64">
        <g id="Graphic_66">
          <rect x="1294.0158" y="1073.1496" width="189.75" height="69.2126" fill="white"/>
          <rect x="1294.0158" y="1073.1496" width="189.75" height="69.2126" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
          <text transform="translate(1299.0158 1078.1496)" fill="black">
            <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="15">name</tspan>
            <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="34">description</tspan>
          </text>
        </g>
        <g id="Graphic_65">
          <rect x="1294.0158" y="1043.1496" width="189.75" height="30" fill="white"/>
          <rect x="1294.0158" y="1043.1496" width="189.75" height="30" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
          <text transform="translate(1299.0158 1048.1496)" fill="black">
            <tspan font-family="Menlo" font-size="16" font-weight="700" fill="black" x="60.97656" y="15">Client</tspan>
          </text>
        </g>
      </g>
      <g id="Group_67">
        <g id="Graphic_69">
          <rect x="1547.7165" y="1060.3937" width="189.75" height="89.05512" fill="white"/>
          <rect x="1547.7165" y="1060.3937" width="189.75" height="89.05512" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
          <text transform="translate(1552.7165 1065.3937)" fill="black">
            <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="15">name</tspan>
            <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="34">description</tspan>
            <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="53">date</tspan>
            <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="72">/total</tspan>
          </text>
        </g>
        <g id="Graphic_68">
          <rect x="1547.7165" y="1030.3937" width="189.75" height="30" fill="white"/>
          <rect x="1547.7165" y="1030.3937" width="189.75" height="30" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
          <text transform="translate(1552.7165 1035.3937)" fill="black">
            <tspan font-family="Menlo" font-size="16" font-weight="700" fill="black" x="65.79297" y="15">Order</tspan>
          </text>
        </g>
      </g>
      <g id="Group_70">
        <g id="Graphic_72">
          <rect x="1532.0404" y="1237.559" width="221.10236" height="115.98425" fill="white"/>
          <rect x="1532.0404" y="1237.559" width="221.10236" height="115.98425" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
          <text transform="translate(1537.0404 1242.559)" fill="black">
            <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="15">name</tspan>
            <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="34">description</tspan>
            <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="53">unit_price</tspan>
            <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="72">date_added_to_catalog</tspan>
            <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="91">/days_on_sale</tspan>
          </text>
        </g>
        <g id="Graphic_71">
          <rect x="1532.0404" y="1207.559" width="221.10236" height="30" fill="white"/>
          <rect x="1532.0404" y="1207.559" width="221.10236" height="30" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
          <text transform="translate(1537.0404 1212.559)" fill="black">
            <tspan font-family="Menlo" font-size="16" font-weight="700" fill="black" x="71.83634" y="15">Product</tspan>
          </text>
        </g>
      </g>
      <g id="Line_73">
        <line x1="1483.7658" y1="1092.7559" x2="1547.7165" y2="1092.7559" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_74">
        <line x1="1642.5915" y1="1149.4488" x2="1642.5915" y2="1207.559" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Group_77">
        <g id="Graphic_79">
          <rect x="1765.9843" y="1169.9504" width="170.07874" height="48" fill="white"/>
          <rect x="1765.9843" y="1169.9504" width="170.07874" height="48" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
          <text transform="translate(1770.9843 1174.9504)" fill="black">
            <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="15">quantity</tspan>
            <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="34">sale_price</tspan>
          </text>
        </g>
        <g id="Graphic_78">
          <rect x="1765.9843" y="1138.1102" width="170.07874" height="31.84017" fill="white"/>
          <rect x="1765.9843" y="1138.1102" width="170.07874" height="31.84017" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
          <text transform="translate(1770.9843 1143.1102)" fill="black">
            <tspan font-family="Menlo" font-size="16" font-weight="700" fill="black" x="22.242496" y="15">OrderProduct</tspan>
          </text>
        </g>
      </g>
      <g id="Line_81">
        <line x1="1765.9843" y1="1178.0303" x2="1642.5915" y2="1178.9228" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4.0,4.0" stroke-width="1"/>
      </g>
      <g id="Graphic_91">
        <rect x="1522.2047" y="1053.0709" width="19.632812" height="29" fill="white"/>
        <text transform="translate(1527.2047 1058.0709)" fill="black">
          <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="15">*</tspan>
        </text>
      </g>
      <g id="Graphic_92">
        <rect x="1488.189" y="1053.0709" width="19.632812" height="29" fill="white"/>
        <text transform="translate(1493.189 1058.0709)" fill="black">
          <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="15">1</tspan>
        </text>
      </g>
      <g id="Graphic_93">
        <text transform="translate(1303.0965 1290.5118)" fill="black">
          <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="4.406651" y="15">/mostPurchasedProduct</tspan>
        </text>
      </g>
      <g id="Line_95">
        <path d="M 1341.4533 1142.3622 L 1341.4533 1279.0788 L 1532.0404 1280.5512" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_97">
        <rect x="1503.7795" y="1250.0788" width="19.632812" height="29" fill="white"/>
        <text transform="translate(1508.7795 1255.0788)" fill="black">
          <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="15">1</tspan>
        </text>
      </g>
      <g id="Graphic_98">
        <rect x="1345.0394" y="1146.6142" width="19.632812" height="29" fill="white"/>
        <text transform="translate(1350.0394 1151.6142)" fill="black">
          <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="15">*</tspan>
        </text>
      </g>
      <g id="Graphic_99">
        <text transform="translate(1225.1446 1339.154)" fill="black">
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="0" y="11">{ </tspan>
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="28" y="25">Client.mostPurchasedProduct = </tspan>
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="28" y="39">SELECT product_id, sum(quantity) as total_qty</tspan>
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="28" y="53">FROM </tspan>
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="28" y="67">Client </tspan>
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="28" y="81">JOIN Order </tspan>
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="28" y="95">ON order.client_id = Client.client_id</tspan>
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="28" y="109">JOIN OrderProduct </tspan>
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="28" y="123">ON order.order_id = OrderProduct.order_id</tspan>
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="28" y="137">WHERE OrderProduct.product_id = product_id</tspan>
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="28" y="151">GROUP BY product_id</tspan>
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="28" y="165">ORDER BY total_qty DESC, product_id DESC</tspan>
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="28" y="179">LIMIT 1 </tspan>
          <tspan font-family="Menlo" font-size="12" font-weight="400" fill="black" x="0" y="193">} </tspan>
        </text>
      </g>
      <g id="Graphic_100">
        <text transform="translate(1734.1339 1464.9645)" fill="gray">
          <tspan font-family="Helvetica Neue" font-size="9" font-style="italic" font-weight="400" fill="gray" x="0" y="9">Ties are solved by product id. There can be </tspan>
          <tspan font-family="Helvetica Neue" font-size="9" font-style="italic" font-weight="400" fill="gray" x="0" y="20.252">ties in the real world, but we force always one </tspan>
          <tspan font-family="Helvetica Neue" font-size="9" font-style="italic" font-weight="400" fill="gray" x="0" y="31.503998">most purchased product for brevity&apos;s sake)</tspan>
        </text>
      </g>
      <g id="Graphic_102">
        <text transform="translate(1005.6299 1255.4588)" fill="gray">
          <tspan font-family="Helvetica Neue" font-size="16" font-style="italic" font-weight="400" fill="gray" x="0" y="15">constraint associated to</tspan>
          <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" y="15"> </tspan>
          <tspan font-family="Menlo" font-size="16" font-weight="400" fill="gray" x="0" y="34">mostPurchasedProduct</tspan>
          <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" y="34"> </tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-style="italic" font-weight="400" fill="gray" x="0" y="53">(how it is calculated). If you </tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-style="italic" font-weight="400" fill="gray" x="0" y="71.448">don’t know how to express it </tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-style="italic" font-weight="400" fill="gray" x="0" y="89.896">in SQL, you can use natural </tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-style="italic" font-weight="400" fill="gray" x="0" y="108.344">language as a fallback (it is </tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-style="italic" font-weight="400" fill="gray" x="0" y="126.79199">better than nothing)</tspan>
        </text>
      </g>
      <g id="Line_101">
        <path d="M 1173.6484 1391.0788 C 1184.4459 1398.3463 1196.8609 1405.4636 1211.0884 1412.0266" marker-end="url(#FilledArrow_Marker)" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_103">
        <text transform="translate(1019.8032 1112.6788)" fill="gray">
          <tspan font-family="Menlo" font-size="16" font-weight="400" fill="gray" x="0" y="15">mostPurchasedProduct</tspan>
          <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" y="15"> </tspan>
          <tspan font-family="Helvetica Neue" font-size="16" font-style="italic" font-weight="400" fill="gray" x="0" y="34">is a derived association </tspan>
        </text>
      </g>
      <g id="Graphic_105">
        <text transform="translate(1770.9843 1301.8504)" fill="black">
          <tspan font-family="Menlo" font-size="16" font-weight="400" fill="black" x="0" y="15">    </tspan>
        </text>
      </g>
      <g id="Line_109">
        <path d="M 1137.5858 1155.4028 C 1160.3931 1189.6215 1207.1135 1251.9898 1264 1285.5118 C 1272.4958 1290.5182 1280.7997 1294.6345 1288.8585 1297.9922" marker-end="url(#FilledArrow_Marker)" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_112">
        <path d="M 1115.3853 1155.4028 C 1109.2751 1176.2961 1100.1712 1208.219 1091.8553 1240.4885" marker-end="url(#FilledArrow_Marker)" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
    </g>
  </g>
</svg>
